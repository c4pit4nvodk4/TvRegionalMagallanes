<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>TV Regional Magallanes</title>
  <link href="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/ICON.png" rel="icon" />
  <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
  <!-- Google Cast SDK -->
  <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"></script>
  
  <style>
    /* Estilos generales */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      text-align: center;
    }

    /* Contenedores de logo */
    .logo-container {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .logo {
      width: 100%;
      height: auto;
      object-fit: contain;
    }

    /* Grid de canales */
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }
    .grid a {
      display: block;
      border: 2px solid #ccc;
      border-radius: 12px;
      overflow: hidden;
      transition: transform 0.2s ease;
      background: white;
      cursor: pointer;
      aspect-ratio: 1 / 1;
    }
    .grid a:hover {
      transform: scale(1.05);
      border-color: #007bff;
    }
    .grid img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    /* Reproductores multimedia */
    #reproductor-container,
    #reproductor-audio-container {
      display: none;
      max-width: 960px;
      margin: 30px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      position: relative;
    }
    #mi-reproductor {
      width: 100%;
      height: 540px;
    }
    #mi-audio {
      width: 100%;
    }

    /* Pie de página */
    footer {
      margin: 60px;
      font-size: 24px;
      color: #333;
    }

    /* Personalización de Video.js */
    .video-js .vjs-control {
      font-size: 30px;
    }
    .video-js .vjs-button > .vjs-icon-placeholder {
      font-size: 20px;
    }
    .video-js .vjs-control-bar {
      height: 55px !important;
    }
    
    /* Botón de casting */
    .cast-button {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 1000;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>

<body>
  <!-- LOGO PRINCIPAL -->
  <div class="logo-container">
    <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/MENU/PORTADA.png" alt="Logo" class="logo">
  </div>

  <!-- REPRODUCTORES -->
  <div id="reproductor-container">
    <button id="cast-video-button" class="cast-button" title="Transmitir a TV"><img src="https://cdn.freebiesupply.com/logos/large/2x/cast-icon-chromecast-logo-black-and-white.png" alt="Casting" class="logo"></button>
    <video id="mi-reproductor" class="video-js vjs-default-skin" controls autoplay preload="auto">
      <source src="" type="application/x-mpegURL" />
    </video>
  </div>

  <div id="reproductor-audio-container">
    <button id="cast-audio-button" class="cast-button" title="Transmitir a TV"><img src="https://cdn.freebiesupply.com/logos/large/2x/cast-icon-chromecast-logo-black-and-white.png" alt="Casting" class="logo"></button>
    <audio id="mi-audio" controls autoplay>
      <source src="" type="audio/mpeg" />
      Tu navegador no soporta la reproducción de audio.
    </audio>
  </div>

  <!-- CANALES REGIONALES -->
  <div class="logo-container">
    <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/MENU/CANALES.png" alt="Canales Regionales" class="logo">
  </div>

  <div class="grid">
    <!-- Canales regionales -->
    <a onclick="abrirReproductor('https://redirector.rudo.video/hls-video/339f69c6122f6d8f4574732c235f09b7683e31a5/pinguinotv/pinguinotv.smil/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/PINGUINOMULTIMEDIA.png" alt="Pingüino TV">
    </a>
    <a onclick="abrirReproductor('https://live20.bozztv.com/akamaissh101/ssh101/radiomagallanes/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/RADIOMAGALLANES.png" alt="Radio Magallanes">
    </a>
    <a onclick="abrirReproductor('https://stmv5.voxtvhd.com.br/radiopolar/radiopolar/playlist.m3u8?PlaylistM3UCL')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/POLARCOMUNICACIONES.png" alt="Polar Comunicaciones">
    </a>
    <a onclick="abrirReproductor('https://unlimited1-cl-isp.dps.live/itv/itv.smil/playlist.m3u8?PlaylistM3UCL')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/ITV.png" alt="ITV Patagonia">
    </a>
    <a onclick="abrirReproductor('https://tls-cl.cdnz.cl/radiosoberania/live/playlist.m3u8?PlaylistM3UCL')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/SOBERANIATV.png" alt="Soberania TV">
    </a>
    <a onclick="abrirReproductor('https://ibanez.servercl.com/hls/live.m3u8?PlaylistM3UCL')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/RADIOIBAÑEZ.png" alt="Radio Presidente Ibañez">
    </a>
    <a onclick="abrirReproductor('https://video8.servidordevideo.net:3161/live/ynhpdikjlive.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/MILODONTV.png" alt="Milodon TV">
    </a>
    <a onclick="abrirReproductor('https://paneltv.stream:19360/ctv35/ctv35.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/CTV35.png" alt="patagonia music">
    </a>
    <a onclick="abrirReproductor('https://stmv5.voxtvhd.com.br/opinionsur/opinionsur/playlist.m3u8?PlaylistM3UCL')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/OPINIONSURTV.png" alt="Opinion Sur">
    </a>
    <!-- Enlaces .html modificados para abrir en misma ventana -->
    <a href="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/9Noticias.html" onclick="return True">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/9.png" alt="9">
    </a>
    <a onclick="abrirReproductor('https://tls-cl.cdnz.cl/umag1/ngrp:live_all/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/UMAGTV1.png" alt="UMAG TV">
    </a>
    <a onclick="abrirReproductor('https://tls-cl.cdnz.cl/umag2/live/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/UMAGTV2.png" alt="UMAG TV 2">
    </a>
    <a onclick="abrirReproductor('https://redirector.rudo.video/hls-video/ey6283je82983je9823je8jowowiekldk9838274/surtv/surtv.smil/playlist.m3u8?did=')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/SURTV.png" alt="SUR TV">
    </a>
    <a onclick="abrirReproductor('https://stmv4.voxtvhd.com.br/evavision/evavision/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/EVAVISION.png" alt="EVAVISION">
    </a>
    <a onclick="abrirReproductor('https://premium.tvcontrolcp.com:1936/evaretro/evaretro/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/EVAVISIONRETRO.png" alt="EVAVISION RETRO">
    </a>
    <a onclick="abrirReproductor('https://v1.tustreaming.cl:19360/canalsurpatagoniatv/canalsurpatagoniatv.m3u8?PlaylistM3UCL')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/CANALSURPATAGONIA.png" alt="Canal Sur Patagonia">
    </a>
    <a onclick="abrirReproductor('https://stmv5.voxtvhd.com.br/redfueguina/redfueguina/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/redfueguinamedios.png" alt="Red Fueguina Radio">
    </a>
    <a onclick="abrirReproductor('https://panel.tvstream.cl:1936/matxnmjryy/matxnmjryy/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/RADIONAVARINO.png" alt="Radio Navarino">
    </a>
    <a onclick="abrirReproductor('https://paneltv.online:1936/8186/8186/playlist.m3u8?PlaylistM3UCL')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/EGMChannel.png" alt="EGM Channel">
    </a>
    <a onclick="abrirReproductor('https://vdochile.com:3131/live/redupxprlive.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/MUSICPUQ.png" alt="MUSIC PUQ">
    </a>
    <a onclick="abrirReproductor('https://paneltv.online:1936/8046/8046/playlist.m3u8?WebM3UCL')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/CLASSICCHANNEL.png" alt="Classic Channel">
    </a>
    <a onclick="abrirReproductor('https://5f700d5b2c46f.streamlock.net:443/airelibrefm/airelibrefm/playlist.m3u8')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/AIRELIBREFM.png" alt="Aire Libre FM">
    </a>
    <a href="https://www.instagram.com/tvregionalmagallanes/" onclick="return True">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/RRSSTV.png" alt="Redes Sociales">
    </a>
    <!-- Enlaces .html modificados para abrir en misma ventana -->
    <a href="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/9Musica.html" onclick="return True">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/9.png" alt="9">
    </a>
    <a onclick="abrirReproductor('https://live.tvcontrolcp.com:8081/radiozona/index.m3u8')">            
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/ZONA90.png" alt="Radio Zona 90">
    </a>
    <a onclick="abrirReproductor('https://tv.arkeo.cl:1936/tvbajocero/tvbajocero/playlist.m3u8')">            
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/BAJOCEROMULTIMEDIA.png" alt="Bajo Cero Multimedia">
    </a>
  </div>

  <!-- CANALES NACIONALES -->
  <div class="logo-container">
    <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/MENU/CANALESNACIONALES.png" alt="Canales Nacionales" class="logo"> 
  </div>
  
  <div class="grid">
    <a onclick="abrirReproductor('https://mdstrm.com/live-stream-playlist/5346f5f2c1e6f5810b5b9df0.m3u8?PlaylistM3UCL')">        
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/TVN.png" alt="TVN">
    </a>
    <a onclick="abrirReproductor('https://m3u.cl/channel/c13.php?PlaylistM3UCL.m3u8?PlaylistM3UCL')">            
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/CANAL13.png" alt="Canal 13">
    </a>
    <a onclick="abrirReproductor('https://mdstrm.com/live-stream-playlist/6491ced935a5833c47dd7f41.m3u8?PlaylistM3UCL')">            
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/CHV.png" alt="CHV">
    </a>
    <a onclick="abrirReproductor('https://unlimited1-cl-isp.dps.live/mega/mega.smil/playlist.m3u8?PlaylistM3UCL')">                
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/MEGA.png" alt="MEGA">
    </a>
    <a onclick="abrirReproductor('https://unlimited2-cl-isp.dps.live/ucvtv2/ucvtv2.smil/playlist.m3u8?PlaylistM3UCL')">    
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/UCV.png" alt="UCV">
    </a>
    <a onclick="abrirReproductor('https://janus-tv-ply.senado.cl/playlist/playlist.m3u8?PlaylistM3UCL')">        
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/SENADO.png" alt="TV SENADO">
    </a>
    <a onclick="abrirReproductor('https://redirector.rudo.video/hls-video/ey6283je82983je9823je8jowowiekldk9838274/tvmas/tvmas.smil/playlist.m3u8?PlaylistM3UCL')">            
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/TVMAS.png" alt="TV +">
    </a>
    <a onclick="abrirReproductor('https://redirector.rudo.video/hls-video/339f69c6122f6d8f4574732c235f09b7683e31a5/bbtv/bbtv.smil/playlist.m3u8?PlaylistM3UCL')">            
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/BIOBIOTV.png" alt="BIO BIO TV">
    </a>
    <a onclick="abrirReproductor('https://alba-cl-lared-lared.stream.mediatiquestream.com/index.m3u8?PlaylistM3UCL')">            
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/LARED.png" alt="LA RED">
    </a>
    <!-- Enlace .html modificado para abrir en misma ventana -->
    <a href="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/9NACIONAL.html" onclick="return True">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/9NACIONAL.png" alt="9 Nacional">
    </a>
    <a href="https://www.instagram.com/tvregionalmagallanes/" onclick="return True">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/RRSSTV.png" alt="Redes Sociales">
    </a>
  </div>

  <!-- RADIOS REGIONALES -->
  <div class="logo-container">
    <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/MENU/RADIOS.png" alt="Radios Regionales" class="logo">  
  </div>
  
  <div class="grid">
    <a onclick="abrirReproductor('https://sonicpanel.cloudstreaming.eu/8078/stream')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/RadioSur.png" alt="Radio Sur Natales">
    </a>
    <a onclick="abrirReproductor('https://179.9.164.55:1935/radio)">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/FARAONICANATALES.png" alt="Faraonica Natales">
    </a>
    <a onclick="abrirReproductor('https://sonic.nnw.cl/8028/stream')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/MERIDIONAL.png" alt="MERIDIONAL">
    </a>
    <a onclick="abrirReproductor('https://sonicpanel.globalstream.pro/8170/stream')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/PATAGONIAAUSTRAL.png" alt="Patagonia Austral">
    </a>
    <a onclick="abrirReproductor('https://sonicpanel.globalstream.pro/8032/stream')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/CamelotFM.png" alt="CAMELOT FM">
    </a>
    <a onclick="abrirReproductor('https://cdn.instream.audio/stream/stylojor')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/STYLOFM.png" alt="Stylo 101.1">
    </a>
    <a onclick="abrirReproductor('https://streaming01.shockmedia.com.ar:10791')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/NuevoDiaFMpng.png" alt="El Diario Nuevo Dia">
    </a>
    <a onclick="abrirReproductor('https://sonic.streamingchilenos.com/9634/;')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/GENERACIONRETRO.png" alt="Generacion Retro">
    </a>
    <a onclick="abrirReproductor('https://sonicpanel.globalstream.pro/8246/stream')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/NATALISSIMA.png" alt="Natalisima">
    </a>
    <a href="https://www.instagram.com/tvregionalmagallanes/" target="_blank">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/RRSSTV.png" alt="Redes Sociales">
    </a>
    <a onclick="abrirReproductor('https://sonicpanelchile.us/8010/stream')">
      <img src="https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/EVARADIO.png" alt="EVA RADIO">
    </a> 
  </div>

  <!-- PIE DE PÁGINA -->
  <footer>
    Por Catalina - Todos los derechos reservados - Para agregar tu canal o radio, contáctame por WhatsApp al +56994461830
  </footer>

  <!-- SCRIPTS -->
  <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
  <script>
    // Inicializar reproductores
    const player = videojs('mi-reproductor');
    const videoContainer = document.getElementById('reproductor-container');
    const audioContainer = document.getElementById('reproductor-audio-container');
    const audioPlayer = document.getElementById('mi-audio');
    
    // Variables para casting
    let castContext = null;
    let currentSession = null;
    let currentMediaUrl = '';
    let isCasting = false;

    // Inicializar API de Google Cast
    function initializeCastApi() {
      cast.framework.CastContext.getInstance().setOptions({
        receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,
        autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
      });
      
      castContext = cast.framework.CastContext.getInstance();
      castContext.addEventListener(
        cast.framework.CastContextEvent.SESSION_STATE_CHANGED,
        onSessionStateChanged
      );
    }
    
    // Manejar cambios de estado de la sesión
    function onSessionStateChanged(event) {
      switch(event.sessionState) {
        case cast.framework.SessionState.SESSION_STARTED:
          isCasting = true;
          sendMediaToChromecast(currentMediaUrl);
          break;
        case cast.framework.SessionState.SESSION_ENDED:
          isCasting = false;
          break;
      }
    }
    
    // Enviar contenido a Chromecast
    function sendMediaToChromecast(url) {
      if (!currentSession || !url) return;
      
      const mediaInfo = new chrome.cast.media.MediaInfo(url);
      mediaInfo.contentType = url.includes('.m3u8') ? 
        'application/vnd.apple.mpegurl' : 'audio/mpeg';
      
      const request = new chrome.cast.media.LoadRequest(mediaInfo);
      request.autoplay = true;
      
      currentSession.loadMedia(request).then(
        () => console.log('Media loaded successfully'),
        (error) => console.error('Error loading media:', error)
      );
    }
    
    // Manejar clic en botón de casting
    document.getElementById('cast-video-button').addEventListener('click', toggleCasting);
    document.getElementById('cast-audio-button').addEventListener('click', toggleCasting);
    
    function toggleCasting() {
      if (!castContext) {
        console.error('Cast API no inicializada');
        return;
      }
      
      if (isCasting) {
        castContext.endCurrentSession(true);
        isCasting = false;
      } else {
        currentSession = castContext.getCurrentSession();
        if (!currentSession) {
          castContext.requestSession().then(session => {
            currentSession = session;
          }).catch(error => {
            console.error('Error requesting session:', error);
          });
        }
      }
    }
    
    // Función para abrir reproductor
    function abrirReproductor(url) {
      const esVideo = url.includes('.m3u8');
      currentMediaUrl = url; // Guardar URL para casting

      // Ocultar reproductores
      videoContainer.style.display = 'none';
      audioContainer.style.display = 'none';
      player.pause();
      player.src('');
      audioPlayer.pause();
      audioPlayer.src = '';

      if (esVideo) {
        videoContainer.style.display = 'block';
        player.muted(false);
        player.src({ src: url, type: 'application/x-mpegURL' });

        // Reproducir y entrar en pantalla completa
        player.play().then(() => {
          const videoElement = document.getElementById('mi-reproductor');
          try {
            if (videoElement.requestFullscreen) {
              videoElement.requestFullscreen();
            } else if (videoElement.webkitRequestFullscreen) {
              videoElement.webkitRequestFullscreen();
            } else if (videoElement.mozRequestFullScreen) {
              videoElement.mozRequestFullScreen();
            } else if (videoElement.msRequestFullscreen) {
              videoElement.msRequestFullscreen();
            }
          } catch (e) {
            console.error("Error al entrar en pantalla completa:", e);
          }
        }).catch((e) => {
          console.error("Error al reproducir:", e);
        });
      } else {
        audioContainer.style.display = 'block';
        audioPlayer.src = url;
        audioPlayer.play();
      }
    }
    
    // Inicializar Cast API cuando esté lista
    window['__onGCastApiAvailable'] = function(isAvailable) {
      if (isAvailable) {
        initializeCastApi();
      }
    };
  </script>
  
  <script type="text/javascript" src="https://contador.websiteout.com/js/7/0/0/0"></script>
</body>
</html>