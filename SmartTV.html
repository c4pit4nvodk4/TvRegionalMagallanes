<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>TV Regional Magallanes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: Arial, Helvetica, sans-serif;
}

video {
  width: 100%;
  height: 100%;
  background: black;
}

#overlay {
  position: absolute;
  bottom: 8%;
  left: 5%;
  display: flex;
  align-items: center;
  gap: 15px;
  background: rgba(0,0,0,0.75);
  padding: 14px 20px;
  border-radius: 14px;
  opacity: 0;
  transition: opacity 0.3s;
}

#overlay img {
  height: 64px;
}

#overlay .info {
  color: white;
}

#overlay .num {
  font-size: 26px;
  font-weight: bold;
}

#overlay .name {
  font-size: 18px;
}

.show { opacity: 1; }
</style>
</head>

<body>

<video id="player" autoplay playsinline></video>

<div id="overlay">
  <img id="logo">
  <div class="info">
    <div class="num" id="canalNum"></div>
    <div class="name" id="canalName"></div>
  </div>
</div>

<script>
const canales = [
  // CANAL 0
  {n:0, nombre:"TV Regional Magallanes", tipo:"intro", url:"https://c4pit4nvodk4.github.io/TvRegionalMagallanes/Trailer.webm", logo:"https://c4pit4nvodk4.github.io/TvRegionalMagallanes/LOGOS/LOGO.png"},

  // TV REGIONAL
  {n:1,nombre:"Pingüino Multimedia",tipo:"video",url:"https://redirector.rudo.video/hls-video/339f69c6122f6d8f4574732c235f09b7683e31a5/pinguinotv/pinguinotv.smil/playlist.m3u8",logo:"LOGOS/PINGUINOMULTIMEDIA.png"},
  {n:2,nombre:"Radio Magallanes TV",tipo:"video",url:"https://live20.bozztv.com/akamaissh101/ssh101/radiomagallanes/playlist.m3u8",logo:"LOGOS/RADIOMAGALLANES.png"},
  {n:3,nombre:"Polar Comunicaciones",tipo:"video",url:"https://polartv.webredirect.org/memfs/319ac83c-e602-4e91-8104-2b5501380b5e.m3u8",logo:"LOGOS/POLARCOMUNICACIONES.png"},
  {n:4,nombre:"ITV Patagonia",tipo:"video",url:"https://unlimited1-cl-isp.dps.live/itv/itv.smil/playlist.m3u8?PlaylistM3UCL",logo:"LOGOS/ITV.png"},
  {n:5,nombre:"Soberanía TV",tipo:"video",url:"https://tls-cl.cdnz.cl/radiosoberania/live/playlist.m3u8?PlaylistM3UCL",logo:"LOGOS/SOBERANIATV.png"},
  {n:6,nombre:"Radio Ibáñez TV",tipo:"video",url:"https://ibanez.servercl.com/hls/live.m3u8",logo:"LOGOS/RADIOIBAÑEZ.png"},
  {n:7,nombre:"Milodón TV",tipo:"video",url:"https://video3.servidordevideo.net:3585/live/upbsfzhdlive.m3u8",logo:"LOGOS/MILODONTV.png"},
  {n:8,nombre:"CTV35",tipo:"video",url:"https://vdochile.com:3697/hybrid/play.m3u8",logo:"LOGOS/CTV35.png"},
  {n:9,nombre:"Opinión Sur TV",tipo:"video",url:"https://stmv5.voxtvhd.com.br/opinionsur/opinionsur/playlist.m3u8?PlaylistM3UCL",logo:"LOGOS/OPINIONSURTV.png"},
  {n:10,nombre:"UMAG TV 1",tipo:"video",url:"https://tls-cl.cdnz.cl/umag1/ngrp:live_all/playlist.m3u8",logo:"LOGOS/UMAGTV1.png"},
  {n:11,nombre:"UMAG TV 2",tipo:"video",url:"https://tls-cl.cdnz.cl/umag2/live/playlist.m3u8",logo:"LOGOS/UMAGTV2.png"},
  {n:12,nombre:"Sur TV",tipo:"video",url:"https://redirector.rudo.video/hls-video/ey6283je82983je9823je8jowowiekldk9838274/surtv/surtv.smil/playlist.m3u8?did=",logo:"LOGOS/SURTV.png"},
  {n:13,nombre:"Eva Visión",tipo:"video",url:"https://stmv4.voxtvhd.com.br/evavision/evavision/playlist.m3u8",logo:"LOGOS/EVAVISION.png"},
  {n:14,nombre:"Eva Visión Retro",tipo:"video",url:"https://premium.tvcontrolcp.com:1936/evaretro/evaretro/playlist.m3u8",logo:"LOGOS/EVAVISIONRETRO.png"},
  {n:15,nombre:"Patagonia TV",tipo:"video",url:"https://videohd.live:19360/8100/8100.m3u8",logo:"LOGOS/PATAGONIATV.png"},
  {n:16,nombre:"Canal Sur Patagonia",tipo:"video",url:"https://v2.tustreaming.cl/fmarcoirirs/tracks-v1a1/playlist.m3u8?PlaylistM3UCL",logo:"LOGOS/CANALSURPATAGONIA.png"},
  {n:17,nombre:"Red Fueguina",tipo:"video",url:"https://stmv5.voxtvhd.com.br/redfueguina/redfueguina/playlist.m3u8",logo:"LOGOS/redfueguinamedios.png"},
  {n:18,nombre:"Radio Navarino TV",tipo:"video",url:"https://panel.tvstream.cl:1936/matxnmjryy/matxnmjryy/playlist.m3u8",logo:"LOGOS/RADIONAVARINO.png"},
  {n:19,nombre:"EGM Channel",tipo:"video",url:"https://vdochile.com:3922/live/egm20live.m3u8",logo:"LOGOS/EGMChannel.png"},
  {n:20,nombre:"Music PUQ",tipo:"video",url:"https://vdochile.com:3131/live/redupxprlive.m3u8",logo:"LOGOS/MUSICPUQ.png"},
  {n:21,nombre:"Classic Channel",tipo:"video",url:"https://paneltv.online:1936/8046/8046/playlist.m3u8?WebM3UCL",logo:"LOGOS/CLASSICCHANNEL.png"},
  {n:22,nombre:"Aire Libre FM TV",tipo:"video",url:"https://5f700d5b2c46f.streamlock.net:443/airelibrefm/airelibrefm/playlist.m3u8",logo:"LOGOS/AIRELIBREFM.png"},
  {n:23,nombre:"Mega",tipo:"video",url:"https://unlimited1-cl-isp.dps.live/mega/mega.smil/playlist.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/455_Mega.png"},
  {n:24,nombre:"Meganoticias",tipo:"video",url:"https://mdstrm.com/live-stream-playlist/561430ae330428c223687e1e.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/449_Meganoticias.png"},
  {n:25,nombre:"Chilevisión",tipo:"video",url:"https://mdstrm.com/live-stream-playlist/6491ced935a5833c47dd7f41.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/1153_CHV.png"},
  {n:26,nombre:"CHV Deportes",tipo:"video",url:"https://mdstrm.com/live-stream-playlist/6531749eaf244059b3ade17b.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/1569_CHV_Deportes.png"},
  {n:27,nombre:"Canal 13",tipo:"video",url:"https://m3u.cl/channel/c13.php?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/457_Canal_13.png"},
  {n:28,nombre:"T13",tipo:"video",url:"https://redirector.rudo.video/hls-video/10b92cafdf3646cbc1e727f3dc76863621a327fd/t13/t13.smil/playlist.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/1054_T13.png"},
  {n:29,nombre:"T13 Radio TV",tipo:"video",url:"https://unlimited1-cl-isp.dps.live/t13radio/t13radio.smil/playlist.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/1198_T13_Radio.png"},
  {n:30,nombre:"Bio Bio TV",tipo:"video",url:"https://redirector.rudo.video/hls-video/339f69c6122f6d8f4574732c235f09b7683e31a5/bbtv/bbtv.smil/playlist.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/421_Bio_Bio_TV.png"},
  {n:31,nombre:"TV+",tipo:"video",url:"https://redirector.rudo.video/hls-video/ey6283je82983je9823je8jowowiekldk9838274/tvmas/tvmas.smil/playlist.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/458_TV_.png"},
  {n:32,nombre:"UCV TV",tipo:"video",url:"https://unlimited2-cl-isp.dps.live/ucvtv2/ucvtv2.smil/playlist.m3u8?PlaylistM3UCL",logo:"https://cdn.m3u.cl/logo/54_UCV.png"},

  // RADIOS
  {n:50,nombre:"Radio Sur",tipo:"radio",url:"https://sonicpanel.cloudstreaming.eu/8078/stream",logo:"LOGOS/RadioSur.png"},
  {n:51,nombre:"Faraónica Natales",tipo:"radio",url:"https://179.9.164.55:1935/radio",logo:"LOGOS/FARAONICANATALES.png"},
  {n:52,nombre:"Radio Meridional",tipo:"radio",url:"https://sonic.nnw.cl/8028/stream",logo:"LOGOS/MERIDIONAL.png"},
  {n:53,nombre:"Patagonia Austral",tipo:"radio",url:"https://sonicpanel.globalstream.pro/8170/stream",logo:"LOGOS/PATAGONIAAUSTRAL.png"},
  {n:54,nombre:"Camelot FM",tipo:"radio",url:"https://sonicpanel.globalstream.pro/8032/stream",logo:"LOGOS/CamelotFM.png"},
  {n:55,nombre:"Stylo FM",tipo:"radio",url:"https://cdn.instream.audio/stream/stylojor",logo:"LOGOS/STYLOFM.png"},
  {n:56,nombre:"Nuevo Día FM",tipo:"radio",url:"https://streaming01.shockmedia.com.ar:10791",logo:"LOGOS/NuevoDiaFMpng.png"},
  {n:57,nombre:"Generación Retro",tipo:"radio",url:"https://sonic.streamingchilenos.com/9634/;",logo:"LOGOS/GENERACIONRETRO.png"},
  {n:58,nombre:"Natalíssima",tipo:"radio",url:"https://sonicpanel.globalstream.pro/8246/stream",logo:"LOGOS/NATALISSIMA.png"},
  {n:59,nombre:"Radio Cooperativa",tipo:"radio",url:"http://stream.cooperativa.cl/cooperativa_link.mp3",logo:"https://cdn.instant.audio/images/logos/emisora-cl/cooperativa.png"},
  {n:60,nombre:"Carnaval FM",tipo:"radio",url:"https://sonando-us.digitalproserver.com/carnaval_antofagasta.aac",logo:"https://cdn.instant.audio/images/logos/emisora-cl/carnaval-vina.png"}
];

let idx = 0;
let hls;
const player = document.getElementById("player");

function cargarCanal(i){
  if(i < 0) i = canales.length - 1;
  if(i >= canales.length) i = 0;
  idx = i;
  const c = canales[idx];
  mostrarOverlay(c);

  if(hls){ hls.destroy(); hls = null; }
  player.pause();
  player.loop = (c.tipo === "intro");

  if(c.tipo === "radio"){
    player.src = c.url;
  } else if(c.url.endsWith(".webm")){
    player.src = c.url;
  } else if(Hls.isSupported()){
    hls = new Hls();
    hls.loadSource(c.url);
    hls.attachMedia(player);
  } else {
    player.src = c.url;
  }
  player.play();
}

function mostrarOverlay(c){
  logo.src = c.logo;
  canalNum.innerText = "Canal " + c.n;
  canalName.innerText = c.nombre;
  overlay.classList.add("show");
  setTimeout(()=>overlay.classList.remove("show"),3000);
}

/* CONTROLES */
document.addEventListener("keydown", e=>{
  if(e.key==="ArrowUp") cargarCanal(idx+1);
  if(e.key==="ArrowDown") cargarCanal(idx-1);
  if(e.key==="+") player.volume=Math.min(1,player.volume+0.1);
  if(e.key==="-") player.volume=Math.max(0,player.volume-0.1);
  if(!isNaN(e.key)){
    const n=parseInt(e.key);
    const c=canales.find(x=>x.n===n);
    if(c) cargarCanal(canales.indexOf(c));
  }
});

let sy=0;
document.addEventListener("touchstart",e=>sy=e.touches[0].clientY);
document.addEventListener("touchend",e=>{
  let ey=e.changedTouches[0].clientY;
  if(sy-ey>50) cargarCanal(idx+1);
  if(ey-sy>50) cargarCanal(idx-1);
});

cargarCanal(0);
</script>

</body>
</html>
