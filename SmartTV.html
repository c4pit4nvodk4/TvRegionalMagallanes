<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TV Regional Magallanes</title>
<link rel="icon" href="LOGOS/ICON.png">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:black;
  overflow:hidden;
  font-family:Arial,Helvetica,sans-serif;
  color:white;
}

/* PLAYER */
video{
  width:100%;
  height:100%;
  background:black;
  object-fit:contain;
}

/* RADIO LOGO */
#audioLogo{
  position:absolute;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
}
#audioLogo img{
  width:45%;
  max-width:420px;
}

/* INFO OVERLAY */
#infoBox{
  position:absolute;
  bottom:20px;
  left:20px;
  background:rgba(0,0,0,.7);
  border-radius:14px;
  padding:15px 18px;
  display:flex;
  align-items:center;
  gap:14px;
  opacity:0;
  transition:.5s;
}
#infoBox img{height:60px}

/* CHANNEL LIST */
#channelList{
  position:absolute;
  right:20px;
  top:50%;
  transform:translateY(-50%);
  background:rgba(0,0,0,.7);
  border-radius:14px;
  padding:10px;
  width:280px;
}
.channelItem{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px;
  opacity:.5;
}
.channelItem.active{
  opacity:1;
  background:rgba(255,255,255,.15);
  border-radius:10px;
}
.channelItem img{height:38px}

/* WELCOME */
#welcome{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  align-items:center;
  justify-content:center;
}
#welcomeBox{
  background:rgba(0,0,0,.9);
  border-radius:16px;
  padding:26px;
  max-width:620px;
  text-align:center;
}
#welcomeBox img{width:80px}
button{
  margin-top:15px;
  padding:10px 30px;
  font-size:16px;
  border:none;
  border-radius:8px;
}
</style>
</head>

<body>

<video id="player" autoplay playsinline></video>

<div id="audioLogo">
  <img id="radioLogo">
</div>

<div id="infoBox">
  <img id="infoLogo">
  <div>
    <div id="infoName"></div>
    <div id="infoNumber"></div>
  </div>
  <img src="LOGOS/ICON.png">
</div>

<div id="channelList"></div>

<div id="welcome">
  <div id="welcomeBox">
    <img src="LOGOS/ICON.png">
    <h2>Tv Regional Magallanes</h2>
    <p>
      Bienvenido a la nueva aplicación de Tv Regional Magallanes para dispositivos
      Android y SmartTV. Disfruta de una parrilla completa de canales de libre acceso,
      con énfasis en la Región de Magallanes.<br><br>
      Solicitudes de canales vía WhatsApp<br>
      <b>+56 9 9446 1830</b>
    </p>
    <img src="LOGOS/ICON.png"><br>
    <button onclick="document.getElementById('welcome').style.display='none'">
      Continuar
    </button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>
const channels = [
/* ===== TV ===== */
{n:1,name:"TV Regional Magallanes",url:"https://c4pit4nvodk4.github.io/TvRegionalMagallanes/Trailer.webm",logo:"LOGOS/ICON.png",type:"video"},
{n:2,name:"Pingüino Multimedia",url:"https://redirector.rudo.video/hls-video/339f69c6122f6d8f4574732c235f09b7683e31a5/pinguinotv/pinguinotv.smil/playlist.m3u8",logo:"LOGOS/PINGUINOMULTIMEDIA.png",type:"hls"},
{n:3,name:"Radio Magallanes TV",url:"https://live20.bozztv.com/akamaissh101/ssh101/radiomagallanes/playlist.m3u8",logo:"LOGOS/RADIOMAGALLANES.png",type:"hls"},
{n:4,name:"Polar Comunicaciones",url:"https://polartv.webredirect.org/memfs/319ac83c-e602-4e91-8104-2b5501380b5e.m3u8",logo:"LOGOS/POLARCOMUNICACIONES.png",type:"hls"},
{n:5,name:"ITV Patagonia",url:"https://unlimited1-cl-isp.dps.live/itv/itv.smil/playlist.m3u8?PlaylistM3UCL",logo:"LOGOS/ITV.png",type:"hls"},
{n:6,name:"Soberanía TV",url:"https://tls-cl.cdnz.cl/radiosoberania/live/playlist.m3u8?PlaylistM3UCL",logo:"LOGOS/SOBERANIATV.png",type:"hls"},
{n:7,name:"Radio Ibáñez TV",url:"https://ibanez.servercl.com/hls/live.m3u8",logo:"LOGOS/RADIOIBAÑEZ.png",type:"hls"},
{n:8,name:"Milodón TV",url:"https://video3.servidordevideo.net:3585/live/upbsfzhdlive.m3u8",logo:"LOGOS/MILODONTV.png",type:"hls"},
{n:9,name:"CTV35",url:"https://vdochile.com:3697/hybrid/play.m3u8",logo:"LOGOS/CTV35.png",type:"hls"},
{n:10,name:"Opinión Sur TV",url:"https://stmv5.voxtvhd.com.br/opinionsur/opinionsur/playlist.m3u8?PlaylistM3UCL",logo:"LOGOS/OPINIONSURTV.png",type:"hls"},
{n:11,name:"UMAG TV 1",url:"https://tls-cl.cdnz.cl/umag1/ngrp:live_all/playlist.m3u8",logo:"LOGOS/UMAGTV1.png",type:"hls"},
{n:12,name:"UMAG TV 2",url:"https://tls-cl.cdnz.cl/umag2/live/playlist.m3u8",logo:"LOGOS/UMAGTV2.png",type:"hls"},
{n:13,name:"Sur TV",url:"https://redirector.rudo.video/hls-video/ey6283je82983je9823je8jowowiekldk9838274/surtv/surtv.smil/playlist.m3u8",logo:"LOGOS/SURTV.png",type:"hls"},
{n:14,name:"Eva Visión",url:"https://stmv4.voxtvhd.com.br/evavision/evavision/playlist.m3u8",logo:"LOGOS/EVAVISION.png",type:"hls"},
{n:15,name:"Eva Visión Retro",url:"https://premium.tvcontrolcp.com:1936/evaretro/evaretro/playlist.m3u8",logo:"LOGOS/EVAVISIONRETRO.png",type:"hls"},
{n:16,name:"Patagonia TV",url:"https://videohd.live:19360/8100/8100.m3u8",logo:"LOGOS/PATAGONIATV.png",type:"hls"},
{n:17,name:"Canal Sur Patagonia",url:"https://v2.tustreaming.cl/fmarcoirirs/tracks-v1a1/playlist.m3u8?PlaylistM3UCL",logo:"LOGOS/CANALSURPATAGONIA.png",type:"hls"},
{n:18,name:"Red Fueguina",url:"https://stmv5.voxtvhd.com.br/redfueguina/redfueguina/playlist.m3u8",logo:"LOGOS/redfueguinamedios.png",type:"hls"},
{n:19,name:"EGM Channel",url:"https://vdochile.com:3922/live/egm20live.m3u8",logo:"LOGOS/EGMChannel.png",type:"hls"},
{n:20,name:"Music PUQ",url:"https://vdochile.com:3131/live/redupxprlive.m3u8",logo:"LOGOS/MUSICPUQ.png",type:"hls"},
{n:21,name:"Classic Channel",url:"https://paneltv.online:1936/8046/8046/playlist.m3u8",logo:"LOGOS/CLASSICCHANNEL.png",type:"hls"},
{n:22,name:"Aire Libre FM TV",url:"https://5f700d5b2c46f.streamlock.net:443/airelibrefm/airelibrefm/playlist.m3u8",logo:"LOGOS/AIRELIBREFM.png",type:"hls"},
{n:23,name:"Mega",url:"https://unlimited1-cl-isp.dps.live/mega/mega.smil/playlist.m3u8",logo:"https://cdn.m3u.cl/logo/455_Mega.png",type:"hls"},
{n:24,name:"Mega Noticias",url:"https://mdstrm.com/live-stream-playlist/561430ae330428c223687e1e.m3u8",logo:"https://cdn.m3u.cl/logo/449_Meganoticias.png",type:"hls"},
{n:25,name:"Chilevisión",url:"https://mdstrm.com/live-stream-playlist/6491ced935a5833c47dd7f41.m3u8",logo:"https://cdn.m3u.cl/logo/1153_CHV.png",type:"hls"},
{n:26,name:"CHV Deportes",url:"https://mdstrm.com/live-stream-playlist/6531749eaf244059b3ade17b.m3u8",logo:"https://cdn.m3u.cl/logo/1569_CHV_Deportes.png",type:"hls"},
{n:27,name:"Canal 13",url:"https://m3u.cl/channel/c13.php",logo:"https://cdn.m3u.cl/logo/457_Canal_13.png",type:"hls"},
{n:28,name:"T13",url:"https://redirector.rudo.video/hls-video/10b92cafdf3646cbc1e727f3dc76863621a327fd/t13/t13.smil/playlist.m3u8",logo:"https://cdn.m3u.cl/logo/1054_T13.png",type:"hls"},
{n:29,name:"T13 Radio TV",url:"https://unlimited1-cl-isp.dps.live/t13radio/t13radio.smil/playlist.m3u8",logo:"https://cdn.m3u.cl/logo/1198_T13_Radio.png",type:"hls"},
{n:30,name:"Bio Bio TV",url:"https://redirector.rudo.video/hls-video/339f69c6122f6d8f4574732c235f09b7683e31a5/bbtv/bbtv.smil/playlist.m3u8",logo:"https://cdn.m3u.cl/logo/421_Bio_Bio_TV.png",type:"hls"},
{n:31,name:"TV+",url:"https://redirector.rudo.video/hls-video/ey6283je82983je9823je8jowowiekldk9838274/tvmas/tvmas.smil/playlist.m3u8",logo:"https://cdn.m3u.cl/logo/458_TV_.png",type:"hls"},
{n:32,name:"UCV TV",url:"https://unlimited2-cl-isp.dps.live/ucvtv2/ucvtv2.smil/playlist.m3u8",logo:"https://cdn.m3u.cl/logo/54_UCV.png",type:"hls"},

/* ===== RADIOS ===== */
{n:100,name:"Radio Sur",url:"https://sonicpanel.cloudstreaming.eu/8078/stream",logo:"LOGOS/RadioSur.png",type:"radio"},
{n:101,name:"Faraónica Natales",url:"https://179.9.164.55:1935/radio",logo:"LOGOS/FARAONICANATALES.png",type:"radio"},
{n:102,name:"Radio Meridional",url:"https://sonic.nnw.cl/8028/stream",logo:"LOGOS/MERIDIONAL.png",type:"radio"},
{n:103,name:"Patagonia Austral",url:"https://sonicpanel.globalstream.pro/8170/stream",logo:"LOGOS/PATAGONIAAUSTRAL.png",type:"radio"},
{n:104,name:"Camelot FM",url:"https://sonicpanel.globalstream.pro/8032/stream",logo:"LOGOS/CamelotFM.png",type:"radio"},
{n:105,name:"Stylo FM",url:"https://cdn.instream.audio/stream/stylojor",logo:"LOGOS/STYLOFM.png",type:"radio"},
{n:106,name:"Nuevo Día FM",url:"https://streaming01.shockmedia.com.ar:10791",logo:"LOGOS/NuevoDiaFMpng.png",type:"radio"},
{n:107,name:"Generación Retro",url:"https://sonic.streamingchilenos.com/9634/;",logo:"LOGOS/GENERACIONRETRO.png",type:"radio"},
{n:108,name:"Natalíssima",url:"https://sonicpanel.globalstream.pro/8246/stream",logo:"LOGOS/NATALISSIMA.png",type:"radio"},
{n:109,name:"Radio Cooperativa",url:"http://stream.cooperativa.cl/cooperativa_link.mp3",logo:"https://cdn.instant.audio/images/logos/emisora-cl/cooperativa.png",type:"radio"},
{n:110,name:"Carnaval FM",url:"https://sonando-us.digitalproserver.com/carnaval_antofagasta.aac",logo:"https://cdn.instant.audio/images/logos/emisora-cl/carnaval-vina.png",type:"radio"},
{n:111,name:"Radio Navarino TV",url:"https://sonic.portalfoxmix.club/8130/stream",logo:"LOGOS/RADIONAVARINO.png",type:"radio"},
{n:112,name:"My Radio",url:"https://panelradio.online/proxy/myradio1/aac",logo:"https://myradio.cl/templates/yootheme/cache/88/logo-200px-889c1292.webp",type:"radio"},
{n:113,name:"Sinfonía Tropical",url:"https://panelradio.online/proxy/sinfoniatropical/aac",logo:"https://sinfoniatropical.cl/templates/yootheme/cache/91/logo-150-918ef28d.webp",type:"radio"}
];

let current=0, hls;
const video=document.getElementById("player");
const audioLogo=document.getElementById("audioLogo");

function loadChannel(i){
  const c=channels[i]; current=i;
  audioLogo.style.display="none";
  video.style.display="block";
  if(hls){hls.destroy();hls=null}

  if(c.type==="radio"){
    video.src=c.url;
    audioLogo.style.display="flex";
    document.getElementById("radioLogo").src=c.logo;
  }else if(c.type==="hls" && Hls.isSupported()){
    hls=new Hls(); hls.loadSource(c.url); hls.attachMedia(video);
  }else video.src=c.url;

  showInfo(c); renderList();
}

function showInfo(c){
  infoLogo.src=c.logo;
  infoName.textContent=c.name;
  infoNumber.textContent="Canal "+c.n;
  infoBox.style.opacity=1;
  setTimeout(()=>infoBox.style.opacity=0,3000);
}

function renderList(){
  channelList.innerHTML="";
  for(let i=-2;i<=2;i++){
    const idx=current+i;
    if(channels[idx]){
      const d=document.createElement("div");
      d.className="channelItem"+(i===0?" active":"");
      d.innerHTML=`<img src="${channels[idx].logo}"><div>${channels[idx].n} - ${channels[idx].name}</div>`;
      channelList.appendChild(d);
    }
  }
}

/* CONTROLES */
// Navegación con teclado
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowUp") loadChannel((current-1+channels.length)%channels.length);
  if(e.key==="ArrowDown") loadChannel((current+1)%channels.length);
});

// Navegación con click
document.addEventListener("click", e => {
  const h = window.innerHeight;
  const y = e.clientY;
  // Superior: siguiente canal | Inferior: canal anterior
  if (y < h / 2) {
    loadChannel((current + 1) % channels.length);
  } else {
    loadChannel((current - 1 + channels.length) % channels.length);
  }
});

loadChannel(0);
</script>


</body>
</html>
